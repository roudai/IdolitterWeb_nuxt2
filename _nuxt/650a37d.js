(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{334:function(t,e,r){var content=r(351);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(58).default)("5b18cbb6",content,!0,{sourceMap:!1})},350:function(t,e,r){"use strict";r(334)},351:function(t,e,r){var n=r(57)(!1);n.push([t.i,"input:disabled{color:#363636!important}",""]),t.exports=n},366:function(t,e,r){"use strict";r.r(e);r(50);var n=r(24),o=r(6),l=(r(36),r(77),r(13),r(40),r(56),r(78),r(42),r(81),r(51),r(62),r(39)),c={data:function(){return{created:!1,formDisabled:!0,editButton:!0,addDisabled:!1,myUrl:"",initialName:"",initialUserId:"",name:"",userId:"",letterColor:"",colors:[]}},beforeCreate:function(){var t=this;setTimeout(Object(o.a)(regeneratorRuntime.mark((function e(){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(l.j)(),n=t.$store.getters["auth/uid"],e.next=4,Object(l.h)(Object(l.g)(r,"users",n));case 4:o=e.sent,t.name=o.data().displayName,t.userId=o.data().user,t.letterColor=o.data().letter_color,t.myUrl="https://idolitter.net/"+t.userId,o.data().colors.forEach((function(e){t.colors.push(e)})),t.created=!0;case 11:case"end":return e.stop()}}),e)}))))},methods:{clickEdit:function(){this.editButton=!1,this.formDisabled=!1,this.initialName=this.name,this.initialUserId=this.userId},clickUpdate:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,o,c,d,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.name===t.initialName&&t.userId===t.initialUserId){e.next=18;break}return r=Object(l.j)(),e.next=4,Object(l.h)(Object(l.g)(r,"users","admin"));case 4:if(o=e.sent,!Object.keys(o.data().users).includes(t.userId)){e.next=8;break}return t.$errorDialog(t.$buefy,"このIDは他のユーザーが使用済みのため利用できません。"),e.abrupt("return");case 8:return t.myUrl="https://idolitter.net/"+t.userId,c=t.$store.getters["auth/uid"],e.next=12,Object(l.o)(Object(l.g)(r,"users",c),{displayName:t.name,user:t.userId});case 12:return d="users."+t.initialUserId,e.next=15,Object(l.o)(Object(l.g)(r,"users","admin"),Object(n.a)({},d,Object(l.f)()));case 15:return h="users."+t.userId,e.next=18,Object(l.o)(Object(l.g)(r,"users","admin"),Object(n.a)({},h,c));case 18:t.editButton=!0,t.formDisabled=!0;case 20:case"end":return e.stop()}}),e)})))()},linkCopy:function(){this.$copyText(this.myUrl),this.$buefy.notification.open({message:"コピーしました。",type:"is-info",position:"is-top",pauseOnHover:!0})},linkOpen:function(){this.$router.push("/"+this.userId)},resetColor:function(){this.letterColor="#ffffff"},addColor:function(){var t="#"+("000000"+(16777215*Math.random()|0).toString(16)).slice(-6);this.colors.push(t),this.colors.length>=30&&(this.addDisabled=!0)},deleteColor:function(){if(this.colors.length<=1){var t="#"+("000000"+(16777215*Math.random()|0).toString(16)).slice(-6);return this.colors.pop(),void this.colors.push(t)}this.colors.pop(),!0===this.addDisabled&&this.colors.length<30&&(this.addDisabled=!1)},register:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(l.j)(),n=t.$store.getters["auth/uid"],e.next=4,Object(l.o)(Object(l.g)(r,"users",n),{letter_color:t.letterColor.toString("hex"),colors:t.colors.map((function(t){return t.toString("hex")}))});case 4:t.$router.push("/mypage");case 5:case"end":return e.stop()}}),e)})))()}}},d=(r(350),r(28)),component=Object(d.a)(c,(function(){var t=this,e=t._self._c;return t.created?e("div",[e("b-collapse",{staticClass:"card p-3 mb-5"},[e("h4",[t._v("プロフィール")]),t._v(" "),e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-4"},[e("b-field",{attrs:{label:"名前",horizontal:""}},[e("b-input",{attrs:{disabled:t.formDisabled},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),e("b-field",{attrs:{label:"ID",horizontal:""}},[e("b-input",{attrs:{disabled:t.formDisabled},model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}})],1)],1)]),t._v(" "),e("h5",[t._v("公開用ダッシュボード")]),t._v(" "),e("div",{staticClass:"columns mb-0"},[e("div",{staticClass:"column is-4"},[e("b-field",[e("p",{staticClass:"control"},[e("b-button",{attrs:{"icon-left":"content-copy"},on:{click:t.linkCopy}})],1),t._v(" "),e("p",{staticClass:"control"},[e("b-button",{attrs:{"icon-left":"open-in-new"},on:{click:t.linkOpen}})],1),t._v(" "),e("b-input",{attrs:{expanded:"",disabled:""},model:{value:t.myUrl,callback:function(e){t.myUrl=e},expression:"myUrl"}})],1)],1)]),t._v(" "),t.editButton?e("div",[e("b-button",{attrs:{type:"is-link is-light"},on:{click:t.clickEdit}},[t._v("編集")])],1):e("div",[e("b-button",{attrs:{type:"is-link is-light"},on:{click:t.clickUpdate}},[t._v("更新")])],1)]),t._v(" "),e("b-collapse",{staticClass:"card p-3 mb-5"},[e("h4",[t._v("入力候補設定")]),t._v(" "),e("div",{staticClass:"buttons"},[e("b-button",{attrs:{type:"is-link is-light"},on:{click:function(e){return t.$router.push("/mypage/edit/place")}}},[t._v("会場名")]),t._v(" "),e("b-button",{attrs:{type:"is-link is-light"},on:{click:function(e){return t.$router.push("/mypage/edit/event")}}},[t._v("イベント名")])],1)]),t._v(" "),e("b-collapse",{staticClass:"card p-3"},[e("h4",[t._v("グラフ設定")]),t._v(" "),e("h5",[t._v("文字の色")]),t._v(" "),e("b-button",{attrs:{type:"is-link is-light"},on:{click:t.resetColor}},[t._v("リセット")]),t._v(" "),e("b-colorpicker",{staticClass:"mt-3 mb-5",model:{value:t.letterColor,callback:function(e){t.letterColor=e},expression:"letterColor"}}),t._v(" "),e("h5",[t._v("塗りつぶし範囲の色")]),t._v(" "),e("div",{staticClass:"buttons"},[e("b-button",{attrs:{type:"is-link is-light",disabled:t.addDisabled},on:{click:t.addColor}},[t._v("色追加")]),t._v(" "),e("b-button",{attrs:{type:"is-link is-light"},on:{click:t.deleteColor}},[t._v("色削除")])],1),t._v(" "),e("b-field",{attrs:{grouped:"","group-multiline":""}},t._l(t.colors,(function(r,n){return e("div",{key:n},[e("b-colorpicker",{staticClass:"mb-2 mr-2",model:{value:t.colors[n],callback:function(e){t.$set(t.colors,n,e)},expression:"colors[index]"}})],1)})),0),t._v(" "),e("b-button",{staticClass:"mt-3",attrs:{type:"is-link is-light"},on:{click:t.register}},[t._v("更新")])],1),t._v(" "),e("div",{staticClass:"buttons mt-3"},[e("b-button",{attrs:{type:"is-link is-light"},on:{click:function(e){return t.$router.push("/mypage")}}},[t._v("戻る")])],1)],1):t._e()}),[],!1,null,null,null);e.default=component.exports}}]);