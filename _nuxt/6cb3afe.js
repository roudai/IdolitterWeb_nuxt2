(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{329:function(t,e,o){"use strict";var r=o(4),n=o(7),l=o(54),c=o(40),d=o(45),h=o(231),f=o(17),v=o(6),m=o(230),_=o(152),w=o(330),x=o(331),y=o(100),C=o(332),k=[],S=n(k.sort),Y=n(k.push),I=v((function(){k.sort(void 0)})),j=v((function(){k.sort(null)})),M=_("sort"),D=!v((function(){if(y)return y<70;if(!(w&&w>3)){if(x)return!0;if(C)return C<603;var code,t,e,o,r="";for(code=65;code<76;code++){switch(t=String.fromCharCode(code),code){case 66:case 69:case 70:case 72:e=3;break;case 68:case 71:e=4;break;default:e=2}for(o=0;o<47;o++)k.push({k:t+o,v:e})}for(k.sort((function(a,b){return b.v-a.v})),o=0;o<k.length;o++)t=k[o].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}}));r({target:"Array",proto:!0,forced:I||!j||!M||!D},{sort:function(t){void 0!==t&&l(t);var e=c(this);if(D)return void 0===t?S(e):S(e,t);var o,r,n=[],v=d(e);for(r=0;r<v;r++)r in e&&Y(n,e[r]);for(m(n,function(t){return function(e,o){return void 0===o?-1:void 0===e?1:void 0!==t?+t(e,o)||0:f(e)>f(o)?1:-1}}(t)),o=d(n),r=0;r<o;)e[r]=n[r++];for(;r<v;)h(e,r++);return e}})},330:function(t,e,o){var r=o(78).match(/firefox\/(\d+)/i);t.exports=!!r&&+r[1]},331:function(t,e,o){var r=o(78);t.exports=/MSIE|Trident/.test(r)},332:function(t,e,o){var r=o(78).match(/AppleWebKit\/(\d+)\./);t.exports=!!r&&+r[1]},333:function(t,e,o){"use strict";var r=o(4),n=o(334).start;r({target:"String",proto:!0,forced:o(335)},{padStart:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},334:function(t,e,o){var r=o(7),n=o(79),l=o(17),c=o(229),d=o(35),h=r(c),f=r("".slice),v=Math.ceil,m=function(t){return function(e,o,r){var c,m,_=l(d(e)),w=n(o),x=_.length,y=void 0===r?" ":l(r);return w<=x||""==y?_:((m=h(y,v((c=w-x)/y.length))).length>c&&(m=f(m,0,c)),t?_+m:m+_)}};t.exports={start:m(!1),end:m(!0)}},335:function(t,e,o){var r=o(78);t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},345:function(t,e,o){"use strict";o.r(e);o(99);var r=o(5),n=(o(39),o(57),o(14),o(44),o(41),o(30),o(64),o(51),o(58),o(329),o(333),o(28)),l={props:{view:{type:String,required:!1,default:""}},data:function(){return{userData:null,userId:"",displayName:"",pageView:"normal",monthData:!0,created:!1,querySnapshot:null,name:"",perPage:10,perPageChangeFlag:!1,totalPage:"",currentPage:"",windowWidth:"",viewYear:"",viewMonth:"",columns:[{label:"",field:"edit",tdClass:"add-text",sortable:!1},{label:"",field:"add",tdClass:"add-text",sortable:!1},{label:"枚数",field:"number",type:"number"},{label:"名前",field:"name",tdClass:"twitter-id"},{label:"グループ",field:"group",tdClass:"group-name"},{label:"TwitterID",field:"twitterId",hidden:!0},{label:"Twitter UID",field:"uid",hidden:!0,globalSearchDisabled:!1},{label:"",field:"delete",tdClass:"add-text",sortable:!1}],rows:[],options_tree:{chart:{offsetY:-3,offsetX:0,type:"treemap",toolbar:{show:!1}},colors:[],dataLabels:{enabled:!0,style:{fontSize:"12px"},formatter:function(text,t){return[text,t.value]},offsetY:-4},plotOptions:{treemap:{distributed:!0,enableShades:!1}}},series_tree:[{data:[]}],options_pi:{plotOptions:{pie:{customScale:1.2,offsetY:30,donut:{labels:{show:!0,total:{show:!0,label:"合計"}}}}},dataLabels:{style:{},dropShadow:{enabled:!1}},chart:{type:"donut"},legend:{position:"top",offsetX:0},colors:[],labels:[]},series_pi:[],options_bar:{chart:{type:"bar",stacked:!0,toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0,dataLabels:{total:{enabled:!0,offsetX:0,style:{fontSize:"13px",fontWeight:900}}}}},dataLabels:{style:{}},stroke:{width:2,colors:["#fff"]},xaxis:{categories:[]},legend:{position:"top",horizontalAlign:"left",offsetX:20},colors:[]},series_bar:[]}},beforeCreate:function(){var t=this;setTimeout(Object(r.a)(regeneratorRuntime.mark((function e(){var o,r,l,c,d,i,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=!0,r=Object(n.l)(),""===t.view){e.next=9;break}return e.next=5,Object(n.j)(Object(n.g)(r,"users","admin"));case 5:void 0===(l=e.sent).data().users[t.view]?t.userId="none":t.userId=l.data().users[t.view],e.next=10;break;case 9:t.userId=t.$store.getters["auth/uid"];case 10:for(c=t.userId,d="m"+t.$dayjs().format("YYYYMM"),t.viewYear=t.$dayjs().format("YYYY"),t.viewMonth=t.$dayjs().format("MM"),i=0;i<6;i++)h=t.$dayjs().subtract(i,"month").format("YYYY"),f=t.$dayjs().subtract(i,"month").format("MM"),t.options_bar.xaxis.categories.push(h+"/"+f);return e.next=17,Object(n.k)(Object(n.q)(Object(n.d)(r,"users",c,"idol"),Object(n.p)("instax_totalling.total","desc")));case 17:return t.querySnapshot=e.sent,t.querySnapshot.empty&&(t.pageView="nonIdol"),t.querySnapshot.forEach((function(e){var r;if(r=e.data().instax_totalling?e.data().instax_totalling.total:0,t.rows.push({edit:"参照",add:"追加",number:r,name:e.data().name,group:e.data().group,twitterId:e.data().twitterId,uid:e.id,delete:"削除"}),e.data().instax_totalling&&0!==e.data().instax_totalling.total){o=!1,t.series_tree[0].data.push({x:e.data().name,y:e.data().instax_totalling.total}),void 0!==e.data().instax_totalling[d]&&0!==e.data().instax_totalling[d]&&(t.options_pi.labels.push(e.data().name),t.series_pi.push(e.data().instax_totalling[d]));for(var data=[],n=0;n<6;n++){var l="m"+t.options_bar.xaxis.categories[n].replace("/","");void 0===e.data().instax_totalling[l]||0===e.data().instax_totalling[l]?data.push(0):data.push(e.data().instax_totalling[l])}t.series_bar.push({name:e.data().name,data:data})}})),t.piDataSort(),0===t.series_pi.length&&(t.options_pi.noData={text:"データなし"}),"normal"===t.pageView&&o&&(t.pageView="nonInstax"),e.next=25,Object(n.j)(Object(n.g)(r,"users",c));case 25:t.userData=e.sent,t.displayName=t.userData.data().displayName,t.options_tree.colors=t.userData.data().colors,t.options_pi.colors=t.userData.data().colors,t.options_bar.colors=t.userData.data().colors,t.options_tree.dataLabels.style.colors=[t.userData.data().letter_color],t.options_pi.dataLabels.style.colors=[t.userData.data().letter_color],t.options_bar.dataLabels.style.colors=[t.userData.data().letter_color],t.created=!0;case 34:case"end":return e.stop()}}),e)}))),0)},methods:{onCellClick:function(t){if("name"===t.column.field){if(""===t.row.twitterId)return;var e="https://twitter.com/".concat(t.row.twitterId);window.open(e,"_blank")}else if("group"===t.column.field){if(""===t.row.group)return;this.$router.push({path:"/group",query:{group:this.replaceParams(t.row.group)}})}else"edit"===t.column.field?this.$router.push("/mypage/"+t.row.uid):"add"===t.column.field?this.$router.push("/mypage/add/"+t.row.uid):"delete"===t.column.field&&this.confirmDelete(t)},confirmDelete:function(t){var e=this;isNaN(t.row.uid)?this.$buefy.dialog.confirm({title:"アイドルの情報を削除します",message:"『"+t.row.name+"』を削除してもよろしいですか？手動登録したアイドルは、チェキのデータを復元することはできません。",cancelText:"キャンセル",confirmText:"OK",type:"is-danger",hasIcon:!0,onConfirm:function(){return e.deleteIdol(t)}}):this.$buefy.dialog.confirm({title:"アイドルの情報を削除します",message:"『"+t.row.name+"』を削除してもよろしいですか？チェキのデータは残るため、再登録で復元します。",cancelText:"キャンセル",confirmText:"OK",type:"is-danger",hasIcon:!0,onConfirm:function(){return e.deleteIdol(t)}})},confirmLogout:function(){var t=this;this.$buefy.dialog.confirm({message:"ログアウトしても良いですか？",cancelText:"キャンセル",confirmText:"OK",type:"is-primary",onConfirm:function(){return t.$store.dispatch("auth/logout")}})},deleteIdol:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function o(){var r,l,c;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=Object(n.l)(),l=e.userId,c=t.row.uid,o.next=5,Object(n.t)(Object(n.g)(r,"users",l),{idol_list:Object(n.b)(c)});case 5:return o.next=7,Object(n.e)(Object(n.g)(r,"users",l,"idol",c));case 7:e.$buefy.dialog.alert({message:"『"+t.row.name+"』の情報を削除しました。",onConfirm:function(){return location.reload()}});case 8:case"end":return o.stop()}}),o)})))()},replaceParams:function(t){return t.includes("傾奇隊")?"傾奇隊":t.includes("仮面女子")?"仮面女子":t.includes("スリジエ：")?"スリジエ東京":t},piDataSort:function(){for(var t=this,e=[],i=0;i<this.options_pi.labels.length;i++)e.push({key:this.options_pi.labels[i],value:this.series_pi[i]});e.sort((function(a,b){return b.value-a.value})),this.options_pi.labels=[],this.series_pi=[],e.forEach((function(element){return t.options_pi.labels.push(element.key)})),e.forEach((function(element){return t.series_pi.push(element.value)}))},prevClick:function(){this.options_pi.labels=[],this.series_pi=[],"01"===this.viewMonth?(this.viewMonth="12",this.viewYear=String(parseInt(this.viewYear)-1)):this.viewMonth=String(parseInt(this.viewMonth)-1).padStart(2,"0"),this.piGarphRedraw()},nextClick:function(){this.options_pi.labels=[],this.series_pi=[],"12"===this.viewMonth?(this.viewMonth="01",this.viewYear=String(parseInt(this.viewYear)+1)):this.viewMonth=String(parseInt(this.viewMonth)+1).padStart(2,"0"),this.piGarphRedraw()},prevBarClick:function(){var t=this.options_bar.xaxis.categories.shift(),e=this.$dayjs(t).subtract(6,"M").format("YYYY/MM");this.options_bar.xaxis.categories.push(e),this.barGraphRedraw()},nextBarClick:function(){var t=this.options_bar.xaxis.categories.pop(),e=this.$dayjs(t).add(6,"M").format("YYYY/MM");this.options_bar.xaxis.categories.unshift(e),this.barGraphRedraw()},piGarphRedraw:function(){var t=this;this.options_pi.labels=[];var e="m"+this.viewYear+this.viewMonth;this.querySnapshot.forEach((function(o){o.data().instax_totalling&&0!==o.data().instax_totalling.total&&void 0!==o.data().instax_totalling[e]&&0!==o.data().instax_totalling[e]&&(t.options_pi.labels.push(o.data().name),t.series_pi.push(o.data().instax_totalling[e]))})),this.piDataSort(),this.options_pi={plotOptions:{pie:{donut:{labels:{show:!0,total:{show:!0,label:"合計"}}}}},chart:{type:"donut"},labels:this.options_pi.labels},0===this.series_pi.length&&(this.options_pi.noData={text:"データなし"}),this.options_pi.colors=this.userData.data().colors,0===this.series_pi.length?this.monthData=!1:this.monthData=!0},barGraphRedraw:function(){var t=this;this.series_bar=[],this.querySnapshot.forEach((function(e){for(var data=[],i=0;i<6;i++){var o="m"+t.options_bar.xaxis.categories[i].replace("/","");void 0===e.data().instax_totalling[o]||0===e.data().instax_totalling[o]?data.push(0):data.push(e.data().instax_totalling[o])}0===data[0]&&data.every((function(t){return t===data[0]}))||t.series_bar.push({name:e.data().name,data:data})})),0===this.series_bar.length&&this.series_bar.push({name:"",data:[0,0,0,0,0,0]})}}},c=o(38),component=Object(c.a)(l,(function(){var t=this,e=t._self._c;return t.created?e("div",[e("h4",[t._v(t._s(t.displayName))]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:""===t.view,expression:"view === ''"}]},[e("vue-good-table",{ref:"idol-table",attrs:{columns:t.columns,rows:t.rows,"sort-options":{enabled:!0,initialSortBy:{field:"number",type:"desc"}},"pagination-options":{enabled:!0,perPage:t.perPage,setCurrentPage:t.currentPage,perPageDropdown:[5,10,30],dropdownAllowAll:!1,nextLabel:"次",prevLabel:"前",rowsPerPageLabel:"表示数",infoFn:function(t){return"".concat(t.currentPage," / ").concat(t.totalPage)}},"search-options":{enabled:!0,skipDiacritics:!0,placeholder:"検索"},"style-class":"vgt-table striped condensed"},on:{"on-cell-click":t.onCellClick}},[e("div",{attrs:{slot:"emptystate"},slot:"emptystate"},[t._v("対象データがありません。")])]),t._v(" "),e("div",{staticClass:"buttons mt-3 has-text-right"},[e("b-button",{attrs:{type:"is-primary is-light"},on:{click:function(e){return t.$router.push("/mypage/addnew")}}},[t._v("アイドル登録")]),t._v(" "),e("b-button",{attrs:{type:"is-primary is-light"},on:{click:function(e){return t.$router.push("/mypage/edit")}}},[t._v("ユーザー設定変更")])],1)],1),t._v(" "),"nonIdol"===t.pageView?e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:""===t.view,expression:"view === ''"}]},[e("div",{staticClass:"notification is-danger is-light mt-3"},[e("nuxt-link",{attrs:{to:"/idol"}},[t._v("アイドル一覧")]),t._v("の「登録」ボタンから、最初のアイドルを登録してください。アイドル一覧にいないアイドルは、\n        上の「アイドル登録」から登録することができます。\n      ")],1)])]):"nonInstax"===t.pageView?e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:""===t.view,expression:"view === ''"}]},[e("div",{staticClass:"notification is-danger is-light mt-3"},[t._v("\n        登録したアイドルの「追加」から、チェキの情報を登録してください。\n      ")])])]):e("div",[e("div",{staticClass:"columns"},[e("div",{staticClass:"column"},[e("b-collapse",{staticClass:"card p-3"},[e("span",[t._v("全期間マップ")]),t._v(" "),e("apex-charts",{attrs:{type:"treemap",height:"400",options:t.options_tree,series:t.series_tree}})],1)],1),t._v(" "),e("div",{staticClass:"column"},[e("b-collapse",{staticClass:"card p-3"},[e("span",{staticClass:"icon",staticStyle:{float:"left"},on:{click:t.prevClick}},[e("b-icon",{attrs:{icon:"chevron-double-left"}})],1),t._v(" "),e("span",{staticStyle:{float:"left"}},[t._v(t._s(t.viewYear)+"年"+t._s(t.viewMonth)+"月")]),t._v(" "),e("span",{staticClass:"icon",on:{click:t.nextClick}},[e("b-icon",{attrs:{icon:"chevron-double-right"}})],1),t._v(" "),e("apex-charts",{attrs:{options:t.options_pi,series:t.series_pi,height:"350"}})],1)],1)]),t._v(" "),e("div",{staticClass:"columns mt-3"},[e("div",{staticClass:"column"},[e("b-collapse",{staticClass:"card p-3"},[e("span",{staticClass:"icon",staticStyle:{float:"left"},on:{click:t.prevBarClick}},[e("b-icon",{attrs:{icon:"chevron-double-left"}})],1),t._v(" "),e("span",{staticStyle:{float:"left"}},[t._v(" 前 | 後 ")]),t._v(" "),e("span",{staticClass:"icon",on:{click:t.nextBarClick}},[e("b-icon",{attrs:{icon:"chevron-double-right"}})],1),t._v(" "),e("apex-charts",{attrs:{options:t.options_bar,series:t.series_bar,height:400}})],1)],1)])]),t._v(" "),e("div",[e("div",[e("div",{staticClass:"mt-3 has-text-right"},[e("b-button",{attrs:{label:"ログアウトする",type:"is-info"},on:{click:t.confirmLogout}})],1)])])]):t._e()}),[],!1,null,null,null);e.default=component.exports}}]);