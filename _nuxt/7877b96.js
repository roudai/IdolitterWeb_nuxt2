(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{348:function(e,t,r){"use strict";r.r(t);r(49),r(91);var n=r(7),o=(r(36),r(75),r(14),r(40),r(93)),l={data:function(){return{show:!0,profileShow:!0,name:"",group:"",twitterId:"",perPage:10,perPageChangeFlag:!1,totalPage:"",currentPage:"",windowWidth:"",compactMode:!1,columns:[{label:"",field:"edit",tdClass:"add-text",sortable:!1},{label:"",field:"delete",tdClass:"add-text",sortable:!1},{label:"日付",field:"date"},{label:"枚数",field:"number"},{label:"会場名",field:"place"},{label:"イベント名",field:"event"},{label:"URL",field:"url",tdClass:"add-text",sortable:!1},{label:"Document ID",field:"docId",hidden:!0,globalSearchDisabled:!1}],rows:[]}},created:function(){var e=this;setTimeout(Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,l,d,c,f,q;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(o.g)(),n="users/"+e.$store.getters["auth/uid"]+"/idol/",l=e.$route.params.uid,d=Object(o.d)(r,n,l),t.next=6,Object(o.e)(d);case 6:return(c=t.sent).exists()?(e.group=c.data().group,e.name=c.data().name,e.twitterId=c.data().twitterId):e.show=!1,f="users/"+e.$store.getters["auth/uid"]+"/idol/"+e.$route.params.uid+"/instax",q=Object(o.h)(Object(o.b)(r,f)),t.next=12,Object(o.f)(q);case 12:t.sent.forEach((function(t){e.rows.push({edit:"編集",delete:"削除",date:e.$dayjs(t.data().date.toDate()).format("YYYY/MM/DD"),number:t.data().number,url:t.data().url,place:t.data().place,event:t.data().event,docId:t.id})}));case 14:case"end":return t.stop()}}),t)}))),0)},methods:{onCellClick:function(e){var t=this;"url"===e.column.field?window.open(e.row.url,"_blank"):"edit"===e.column.field?this.$router.push("/mypage/edit/"+e.row.docId):"delete"===e.column.field&&this.$buefy.dialog.confirm({title:"チェキの情報を削除します",message:"情報の復元はできません。削除しても良いですか？",cancelText:"キャンセル",confirmText:"OK",type:"is-danger",hasIcon:!0,onConfirm:function(){return t.deleteInstax(e)}})},clickEdit:function(){this.profileShow=!1},clickUpdate:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(o.g)(),n="users/"+e.$store.getters["auth/uid"]+"/idol/",l=e.$route.params.uid,t.next=5,Object(o.i)(Object(o.d)(r,n,l),{name:e.name,group:e.group,twitterId:e.twitterId});case 5:e.profileShow=!0;case 6:case"end":return t.stop()}}),t)})))()},deleteInstax:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=Object(o.g)(),l="users/"+t.$store.getters["auth/uid"]+"/idol/"+t.$route.params.uid+"/instax",r.next=4,Object(o.c)(Object(o.d)(n,l,e.row.docId));case 4:t.$buefy.dialog.alert({message:"削除しました。",onConfirm:function(){return location.reload()}});case 5:case"end":return r.stop()}}),r)})))()}}},d=r(27),component=Object(d.a)(l,(function(){var e=this,t=e._self._c;return t("div",[e.profileShow?t("div",[t("h3",[e._v(e._s(e.name))]),e._v(" "),t("h4",[e._v(e._s(e.group))]),e._v(" "),t("div",{staticClass:"buttons mt-3 mb-3"},[t("b-button",{attrs:{type:"is-link is-light"},on:{click:e.clickEdit}},[e._v("編集")])],1)]):t("div",[t("b-field",[t("b-input",{attrs:{expanded:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),t("b-input",{attrs:{expanded:""},model:{value:e.twitterId,callback:function(t){e.twitterId=t},expression:"twitterId"}})],1),e._v(" "),t("b-field",[t("b-input",{model:{value:e.group,callback:function(t){e.group=t},expression:"group"}})],1),e._v(" "),t("div",{staticClass:"buttons mt-3 mb-3"},[t("b-button",{attrs:{type:"is-link is-light"},on:{click:e.clickUpdate}},[e._v("更新")])],1)],1),e._v(" "),t("vue-good-table",{ref:"idol-table",attrs:{columns:e.columns,rows:e.rows,"compact-mode":e.compactMode,"sort-options":{enabled:!0,initialSortBy:{field:"date",type:"desc"}},"pagination-options":{enabled:!0,perPage:e.perPage,setCurrentPage:e.currentPage,perPageDropdown:[5,10,30,100],dropdownAllowAll:!1,nextLabel:"次",prevLabel:"前",rowsPerPageLabel:"表示数",infoFn:function(e){return"".concat(e.currentPage," / ").concat(e.totalPage)}},"style-class":"vgt-table striped condensed"},on:{"on-cell-click":e.onCellClick}}),e._v(" "),t("div",{staticClass:"buttons mt-3"},[t("b-button",{attrs:{type:"is-link is-light"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("戻る")])],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);