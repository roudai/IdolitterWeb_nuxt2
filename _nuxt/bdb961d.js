(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{318:function(t,e,n){"use strict";var o=n(4),r=n(319).start;o({target:"String",proto:!0,forced:n(320)},{padStart:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},319:function(t,e,n){var o=n(10),r=n(77),l=n(17),c=n(219),h=n(37),d=o(c),f=o("".slice),m=Math.ceil,_=function(t){return function(e,n,o){var c,_,v=l(h(e)),w=r(n),x=v.length,C=void 0===o?" ":l(o);return w<=x||""==C?v:((_=d(C,m((c=w-x)/C.length))).length>c&&(_=f(_,0,c)),t?v+_:_+v)}};t.exports={start:_(!1),end:_(!0)}},320:function(t,e,n){var o=n(76);t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(o)},346:function(t,e,n){"use strict";n.r(e);n(92);var o=n(7),r=(n(36),n(75),n(14),n(40),n(49),n(28),n(78),n(74),n(91),n(318),n(93)),l={data:function(){return{pageView:"normal",monthData:!0,created:!1,querySnapshot:null,name:"",perPage:10,perPageChangeFlag:!1,totalPage:"",currentPage:"",windowWidth:"",piChartsWidth:0,piChartsHeight:0,setYear:"2023",setMonth:"01",compactMode:!1,columns:[{label:"",field:"edit",tdClass:"add-text",sortable:!1},{label:"枚数",field:"number",type:"number"},{label:"名前",field:"name",tdClass:"twitter-id"},{label:"グループ",field:"group",tdClass:"group-name"},{label:"TwitterID",field:"twitterId",hidden:!0},{label:"Twitter UID",field:"uid",hidden:!0,globalSearchDisabled:!1},{label:"",field:"delete",tdClass:"add-text",sortable:!1}],rows:[],options_tree:{legend:{show:!1},chart:{height:350,type:"treemap"},colors:[],dataLabels:{enabled:!0,style:{fontSize:"12px"},formatter:function(text,t){return[text,t.value]},offsetY:-4},plotOptions:{treemap:{distributed:!0,enableShades:!1}}},series_tree:[{data:[]}],options_month:{plotOptions:{pie:{donut:{labels:{show:!0,total:{show:!0,label:"合計"}}}}},chart:{type:"donut"},colors:[],labels:[]},series_month:[],options_bar:{chart:{type:"bar",height:350,stacked:!0},plotOptions:{bar:{horizontal:!0,dataLabels:{total:{enabled:!0,offsetX:0,style:{fontSize:"13px",fontWeight:900}}}}},stroke:{width:2,colors:["#fff"]},xaxis:{categories:[]},legend:{position:"top",horizontalAlign:"left",offsetX:40},colors:[]},series_bar:[],select_colors:["#662E9B","#F86624","#F9C80E","#F9C80E","#43BCCD","#2E294E","#1B998B","#C5D86D","#F9A3A4","#5C4742","#008FFB","#00E396","#FEB019","#FF4560","#775DD0","#00B1F2","#4CAF50","#F9CE1D","#FD6A6A","#E2C044"]}},mounted:function(){window.addEventListener("resize",this.resizeWindow),this.windowWidth=window.innerWidth,this.setPiChartsSize()},beforeCreate:function(){var t=this;setTimeout(Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,l,c,i,h,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=!0,o=Object(r.h)(),l=t.$store.getters["auth/uid"],c="m"+t.$dayjs().format("YYYYMM"),i=0;i<6;i++)h=t.$dayjs().subtract(i,"month").format("YYYY"),d=t.$dayjs().subtract(i,"month").format("MM"),t.options_bar.xaxis.categories.push(h+"/"+d);return e.next=7,Object(r.g)(Object(r.k)(Object(r.c)(o,"users",l,"idol"),Object(r.j)("instax_totalling.total","desc")));case 7:t.querySnapshot=e.sent,t.querySnapshot.empty&&(t.pageView="nonIdol"),t.querySnapshot.forEach((function(e){var o;if(o=e.data().instax_totalling?e.data().instax_totalling.total:0,t.rows.push({edit:"参照",number:o,name:e.data().name,group:e.data().group,twitterId:e.data().twitterId,uid:e.id,delete:"削除"}),e.data().instax_totalling&&0!==e.data().instax_totalling.total){n=!1,t.series_tree[0].data.push({x:e.data().name,y:e.data().instax_totalling.total}),void 0!==e.data().instax_totalling[c]&&0!==e.data().instax_totalling[c]&&(t.options_month.labels.push(e.data().name),t.series_month.push(e.data().instax_totalling[c]));for(var data=[],r=0;r<6;r++){var l="m"+t.options_bar.xaxis.categories[r].replace("/","");void 0===e.data().instax_totalling[l]||0===e.data().instax_totalling[l]?data.push(0):data.push(e.data().instax_totalling[l])}t.series_bar.push({name:e.data().name,data:data})}})),0===t.series_month.length&&(t.options_month.noData={text:"データなし"}),"normal"===t.pageView&&n&&(t.pageView="nonInstax"),t.options_tree.colors=t.select_colors,t.options_month.colors=t.select_colors,t.options_bar.colors=t.select_colors,t.created=!0;case 16:case"end":return e.stop()}}),e)}))),0)},methods:{onCellClick:function(t){if("name"===t.column.field){var e="https://twitter.com/".concat(t.row.twitterId);window.open(e,"_blank")}else if("group"===t.column.field){if(""===t.row.group)return;this.$router.push({path:"/group",query:{group:this.replaceParams(t.row.group)}})}else"edit"===t.column.field?this.$router.push("/mypage/"+t.row.uid):"delete"===t.column.field&&this.confirmDelete(t)},confirmDelete:function(t){var e=this;this.$buefy.dialog.confirm({title:"アイドルの情報を削除します",message:"『"+t.row.name+"』を削除してもよろしいですか？チェキのデータは残るため、再登録で復元します。",cancelText:"キャンセル",confirmText:"OK",type:"is-danger",hasIcon:!0,onConfirm:function(){return e.deleteIdol(t)}})},confirmLogout:function(){var t=this;this.$buefy.dialog.confirm({message:"ログアウトしても良いですか？",cancelText:"キャンセル",confirmText:"OK",type:"is-primary",onConfirm:function(){return t.$store.dispatch("auth/logout")}})},deleteIdol:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,l,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=Object(r.h)(),l=e.$store.getters["auth/uid"],c=t.row.uid,n.next=5,Object(r.d)(Object(r.e)(o,"users",l,"idol",c));case 5:e.$buefy.dialog.alert({message:"『"+t.row.name+"』の情報を削除しました。",onConfirm:function(){return location.reload()}});case 6:case"end":return n.stop()}}),n)})))()},replaceParams:function(t){return t.includes("傾奇隊")?"傾奇隊":t.includes("仮面女子")?"仮面女子":t.includes("スリジエ：")?"スリジエ東京":t},resizeWindow:function(){this.setPiChartsSize()},setPiChartsSize:function(){window.innerWidth<1080?(this.piChartsWidth=.9*window.innerWidth,this.piChartsHeight=.9*window.innerWidth):(this.piChartsWidth=Math.min(window.innerWidth/2*.8,650),this.piChartsHeight=Math.min(window.innerWidth/2*.8,650))},prevClick:function(){this.options_month.labels=[],this.series_month=[],"01"===this.setMonth?(this.setMonth="12",this.setYear=String(parseInt(this.setYear)-1)):this.setMonth=String(parseInt(this.setMonth)-1).padStart(2,"0"),this.piGarphRedraw()},nextClick:function(){this.options_month.labels=[],this.series_month=[],"12"===this.setMonth?(this.setMonth="01",this.setYear=String(parseInt(this.setYear)+1)):this.setMonth=String(parseInt(this.setMonth)+1).padStart(2,"0"),this.piGarphRedraw()},prevBarClick:function(){var t=this.options_bar.xaxis.categories.shift(),e=this.$dayjs(t).subtract(6,"M").format("YYYY/MM");this.options_bar.xaxis.categories.push(e),this.barGraphRedraw()},nextBarClick:function(){var t=this.options_bar.xaxis.categories.pop(),e=this.$dayjs(t).add(6,"M").format("YYYY/MM");this.options_bar.xaxis.categories.unshift(e),this.barGraphRedraw()},piGarphRedraw:function(){var t=this,e=[],n="m"+this.setYear+this.setMonth;this.querySnapshot.forEach((function(o){o.data().instax_totalling&&0!==o.data().instax_totalling.total&&void 0!==o.data().instax_totalling[n]&&0!==o.data().instax_totalling[n]&&(e.push(o.data().name),t.series_month.push(o.data().instax_totalling[n]))})),this.options_month={plotOptions:{pie:{donut:{labels:{show:!0,total:{show:!0,label:"合計"}}}}},chart:{type:"donut"},labels:e},0===this.series_month.length&&(this.options_month.noData={text:"データなし"}),this.options_month.colors=this.select_colors,0===this.series_month.length?this.monthData=!1:this.monthData=!0},barGraphRedraw:function(){var t=this;this.series_bar=[],this.querySnapshot.forEach((function(e){for(var data=[],i=0;i<6;i++){var n="m"+t.options_bar.xaxis.categories[i].replace("/","");void 0===e.data().instax_totalling[n]||0===e.data().instax_totalling[n]?data.push(0):data.push(e.data().instax_totalling[n])}0===data[0]&&data.every((function(t){return t===data[0]}))||t.series_bar.push({name:e.data().name,data:data})})),0===this.series_bar.length&&this.series_bar.push({name:"",data:[0,0,0,0,0,0]})}}},c=n(27),component=Object(c.a)(l,(function(){var t=this,e=t._self._c;return t.created?e("div",[e("h5",[t._v("マイページ")]),t._v(" "),e("vue-good-table",{ref:"idol-table",attrs:{columns:t.columns,rows:t.rows,"compact-mode":t.compactMode,"sort-options":{enabled:!0,initialSortBy:{field:"number",type:"desc"}},"pagination-options":{enabled:!0,perPage:t.perPage,setCurrentPage:t.currentPage,perPageDropdown:[5,10,30],dropdownAllowAll:!1,nextLabel:"次",prevLabel:"前",rowsPerPageLabel:"表示数",infoFn:function(t){return"".concat(t.currentPage," / ").concat(t.totalPage)}},"search-options":{enabled:!0,skipDiacritics:!0,placeholder:"検索"},"style-class":"vgt-table striped condensed"},on:{"on-cell-click":t.onCellClick}},[e("div",{attrs:{slot:"emptystate"},slot:"emptystate"},[t._v("対象データがありません。")])]),t._v(" "),"nonIdol"===t.pageView?e("div",[e("div",{staticClass:"notification is-danger is-light mt-3"},[e("nuxt-link",{attrs:{to:"/idol"}},[t._v("アイドル一覧")]),t._v("の「登録」ボタンから、最初のアイドルを登録してください。アイドル一覧にいないアイドルは、\n      下の「アイドル登録」から登録することができます。\n    ")],1)]):"nonInstax"===t.pageView?e("div",[e("div",{staticClass:"notification is-danger is-light mt-3"},[t._v("\n      登録したアイドルの「参照」⇒「追加」から、チェキの情報を登録してください。\n    ")])]):e("div",[e("div",{staticClass:"columns mt-3"},[e("div",{staticClass:"column"},[e("b-collapse",{staticClass:"card p-3"},[e("apex-charts",{attrs:{type:"treemap",height:"350",options:t.options_tree,series:t.series_tree}})],1)],1),t._v(" "),e("div",{staticClass:"column"},[e("b-collapse",{staticClass:"card p-3"},[e("span",{staticClass:"icon",staticStyle:{float:"left"},on:{click:t.prevClick}},[e("b-icon",{attrs:{icon:"chevron-double-left"}})],1),t._v(" "),e("span",{staticStyle:{float:"left"}},[t._v(t._s(t.setYear)+"年"+t._s(t.setMonth)+"月")]),t._v(" "),e("span",{staticClass:"icon",on:{click:t.nextClick}},[e("b-icon",{attrs:{icon:"chevron-double-right"}})],1),t._v(" "),e("apex-charts",{attrs:{options:t.options_month,series:t.series_month,height:"350"}})],1)],1)]),t._v(" "),e("div",{staticClass:"columns mt-3"},[e("div",{staticClass:"column"},[e("b-collapse",{staticClass:"card p-3"},[e("span",{staticClass:"icon",staticStyle:{float:"left"},on:{click:t.prevBarClick}},[e("b-icon",{attrs:{icon:"chevron-double-left"}})],1),t._v(" "),e("span",{staticStyle:{float:"left"}},[t._v(" 前 | 後 ")]),t._v(" "),e("span",{staticClass:"icon",on:{click:t.nextBarClick}},[e("b-icon",{attrs:{icon:"chevron-double-right"}})],1),t._v(" "),e("apex-charts",{attrs:{options:t.options_bar,series:t.series_bar,height:350}})],1)],1)])]),t._v(" "),e("div",{staticClass:"buttons mt-3"},[e("b-button",{attrs:{type:"is-primary is-light"},on:{click:function(e){return t.$router.push("/mypage/addnew")}}},[t._v("アイドル登録")]),t._v(" "),e("b-button",{attrs:{label:"ログアウトする",type:"is-info"},on:{click:t.confirmLogout}})],1)],1):t._e()}),[],!1,null,null,null);e.default=component.exports}}]);