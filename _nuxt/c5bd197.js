(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{319:function(t,e,n){"use strict";var r=n(4),o=n(320).start;r({target:"String",proto:!0,forced:n(321)},{padStart:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},320:function(t,e,n){var r=n(10),o=n(77),l=n(17),d=n(220),c=n(37),h=r(d),m=r("".slice),f=Math.ceil,w=function(t){return function(e,n,r){var d,w,v=l(c(e)),C=o(n),_=v.length,x=void 0===r?" ":l(r);return C<=_||""==x?v:((w=h(x,f((d=C-_)/x.length))).length>d&&(w=m(w,0,d)),t?v+w:w+v)}};t.exports={start:w(!1),end:w(!0)}},321:function(t,e,n){var r=n(76);t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},347:function(t,e,n){"use strict";n.r(e);n(92);var r=n(7),o=(n(36),n(75),n(14),n(40),n(49),n(319),n(74),n(91),n(93)),l={data:function(){return{created:!1,querySnapshot:null,name:"",perPage:10,perPageChangeFlag:!1,totalPage:"",currentPage:"",windowWidth:"",piChartsWidth:0,piChartsHeight:0,selectMonth:new Date,compactMode:!1,columns:[{label:"",field:"edit",tdClass:"add-text",sortable:!1},{label:"枚数",field:"number",type:"number"},{label:"名前",field:"name",tdClass:"twitter-id"},{label:"グループ",field:"group",tdClass:"group-name"},{label:"TwitterID",field:"twitterId",hidden:!0},{label:"Twitter UID",field:"uid",hidden:!0,globalSearchDisabled:!1},{label:"",field:"delete",tdClass:"add-text",sortable:!1}],rows:[],options:{chart:{type:"donut"},labels:[]},options_month:{chart:{type:"donut"},labels:[]},series:[],series_month:[]}},mounted:function(){window.addEventListener("resize",this.resizeWindow),this.windowWidth=window.innerWidth,this.setPiChartsSize()},beforeCreate:function(){var t=this;setTimeout(Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(o.h)(),r=t.$store.getters["auth/uid"],e.next=4,Object(o.g)(Object(o.k)(Object(o.c)(n,"users",r,"idol"),Object(o.j)("instax_totalling.total","desc")));case 4:t.querySnapshot=e.sent,t.querySnapshot.forEach((function(e){var n;if(n=e.data().instax_totalling?e.data().instax_totalling.total:0,t.rows.push({edit:"参照",number:n,name:e.data().name,group:e.data().group,twitterId:e.data().twitterId,uid:e.id,delete:"削除"}),e.data().instax_totalling&&0!==e.data().instax_totalling.total){t.options.labels.push(e.data().name),t.series.push(e.data().instax_totalling.total);var r="m"+String(t.selectMonth.getFullYear())+String(t.selectMonth.getMonth()+1).padStart(2,"0");void 0!==e.data().instax_totalling[r]&&(t.options_month.labels.push(e.data().name),t.series_month.push(e.data().instax_totalling[r]))}})),t.created=!0;case 7:case"end":return e.stop()}}),e)}))),0)},methods:{onCellClick:function(t){if("name"===t.column.field){var e="https://twitter.com/".concat(t.row.twitterId);window.open(e,"_blank")}else if("group"===t.column.field){if(""===t.row.group)return;this.$router.push({path:"/group",query:{group:this.replaceParams(t.row.group)}})}else"edit"===t.column.field?this.$router.push("/mypage/"+t.row.uid):"delete"===t.column.field&&this.confirmDelete(t)},confirmDelete:function(t){var e=this;this.$buefy.dialog.confirm({title:"アイドルの情報を削除します",message:"登録しているチェキの情報もすべて削除され、復元はできません。『"+t.row.name+"』の情報を本当に削除してもよろしいですか？",cancelText:"キャンセル",confirmText:"OK",type:"is-danger",hasIcon:!0,onConfirm:function(){return e.deleteIdol(t)}})},confirmLogout:function(){var t=this;this.$buefy.dialog.confirm({message:"ログアウトしても良いですか？",cancelText:"キャンセル",confirmText:"OK",type:"is-primary",onConfirm:function(){return t.$store.dispatch("auth/logout")}})},deleteIdol:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,l,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=Object(o.h)(),l=e.$store.getters["auth/uid"],d=t.row.uid,n.next=5,Object(o.d)(Object(o.e)(r,"users",l,"idol",d));case 5:e.$buefy.dialog.alert({message:"『"+t.row.name+"』の情報を削除しました。",onConfirm:function(){return location.reload()}});case 6:case"end":return n.stop()}}),n)})))()},replaceParams:function(t){return t.includes("傾奇隊")?"傾奇隊":t.includes("仮面女子")?"仮面女子":t.includes("スリジエ：")?"スリジエ東京":t},resizeWindow:function(){this.setPiChartsSize()},setPiChartsSize:function(){window.innerWidth<1080?(this.piChartsWidth=.9*window.innerWidth,this.piChartsHeight=.9*window.innerWidth):(this.piChartsWidth=Math.min(window.innerWidth/2*.8,650),this.piChartsHeight=Math.min(window.innerWidth/2*.8,650))}}},d=n(27),component=Object(d.a)(l,(function(){var t=this,e=t._self._c;return t.created?e("div",[e("h5",[t._v("マイページ")]),t._v(" "),e("vue-good-table",{ref:"idol-table",attrs:{columns:t.columns,rows:t.rows,"compact-mode":t.compactMode,"sort-options":{enabled:!0,initialSortBy:{field:"number",type:"desc"}},"pagination-options":{enabled:!0,perPage:t.perPage,setCurrentPage:t.currentPage,perPageDropdown:[5,10,30],dropdownAllowAll:!1,nextLabel:"次",prevLabel:"前",rowsPerPageLabel:"表示数",infoFn:function(t){return"".concat(t.currentPage," / ").concat(t.totalPage)}},"search-options":{enabled:!0,skipDiacritics:!0,placeholder:"検索"},"style-class":"vgt-table striped condensed"},on:{"on-cell-click":t.onCellClick}}),t._v(" "),e("div",{staticClass:"columns mt-3"},[e("div",{staticClass:"column"},[e("h5",{staticClass:"ml-5"},[t._v("全期間")]),t._v(" "),e("apex-charts",{attrs:{options:t.options,series:t.series,width:t.piChartsWidth,height:t.piChartsHeight}})],1),t._v(" "),e("div",{staticClass:"column"},[e("h5",{staticClass:"ml-5"},[t._v("今月")]),t._v(" "),e("apex-charts",{attrs:{options:t.options_month,series:t.series_month,width:t.piChartsWidth,height:t.piChartsHeight}})],1)]),t._v(" "),e("div",{staticClass:"buttons mt-3"},[e("b-button",{attrs:{type:"is-primary is-light"},on:{click:function(e){return t.$router.push("/mypage/addnew")}}},[t._v("アイドル登録")]),t._v(" "),e("b-button",{attrs:{label:"ログアウトする",type:"is-info"},on:{click:t.confirmLogout}})],1)],1):t._e()}),[],!1,null,null,null);e.default=component.exports}}]);